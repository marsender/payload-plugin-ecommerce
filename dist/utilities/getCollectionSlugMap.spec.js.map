{"version":3,"sources":["../../src/utilities/getCollectionSlugMap.spec.ts"],"sourcesContent":["import type { SanitizedEcommercePluginConfig } from '../types/index.js'\n\nimport { USD } from '../currencies/index.js'\nimport { getCollectionSlugMap } from './getCollectionSlugMap'\n\ndescribe('getCollectionSlugMap', () => {\n  const mockAccessConfig = {\n    adminOnlyFieldAccess: jest.fn(),\n    adminOrPublishedStatus: jest.fn(),\n    customerOnlyFieldAccess: jest.fn(),\n    isAdmin: jest.fn(),\n    isAuthenticated: jest.fn(),\n    isDocumentOwner: jest.fn(),\n    publicAccess: jest.fn(),\n  }\n\n  const baseConfig: SanitizedEcommercePluginConfig = {\n    access: mockAccessConfig,\n    addresses: {\n      addressFields: [],\n    },\n    carts: true,\n    currencies: {\n      defaultCurrency: 'USD',\n      supportedCurrencies: [USD],\n    },\n    customers: {\n      slug: 'users',\n    },\n    orders: true,\n    payments: {\n      paymentMethods: [],\n    },\n    products: true,\n    transactions: true,\n  }\n\n  it('should return default slug map when no overrides are provided', () => {\n    const result = getCollectionSlugMap({ sanitizedPluginConfig: baseConfig })\n\n    expect(result).toEqual({\n      addresses: 'addresses',\n      carts: 'carts',\n      customers: 'users',\n      orders: 'orders',\n      products: 'products',\n      transactions: 'transactions',\n      variantOptions: 'variantOptions',\n      variants: 'variants',\n      variantTypes: 'variantTypes',\n    })\n  })\n\n  it('should use custom customers slug when provided', () => {\n    const config: SanitizedEcommercePluginConfig = {\n      ...baseConfig,\n      customers: {\n        slug: 'custom-users',\n      },\n    }\n\n    const result = getCollectionSlugMap({ sanitizedPluginConfig: config })\n\n    expect(result.customers).toBe('custom-users')\n  })\n\n  it('should apply slugMap overrides', () => {\n    const config: SanitizedEcommercePluginConfig = {\n      ...baseConfig,\n      slugMap: {\n        products: 'custom-products',\n        variants: 'custom-variants',\n        orders: 'custom-orders',\n      },\n    }\n\n    const result = getCollectionSlugMap({ sanitizedPluginConfig: config })\n\n    expect(result.products).toBe('custom-products')\n    expect(result.variants).toBe('custom-variants')\n    expect(result.orders).toBe('custom-orders')\n    // Other slugs should remain default\n    expect(result.addresses).toBe('addresses')\n    expect(result.carts).toBe('carts')\n  })\n\n  it('should prioritize slugMap overrides over customers slug', () => {\n    const config: SanitizedEcommercePluginConfig = {\n      ...baseConfig,\n      customers: {\n        slug: 'my-users',\n      },\n      slugMap: {\n        customers: 'overridden-users',\n      },\n    }\n\n    const result = getCollectionSlugMap({ sanitizedPluginConfig: config })\n\n    expect(result.customers).toBe('overridden-users')\n  })\n\n  it('should handle partial slugMap overrides', () => {\n    const config: SanitizedEcommercePluginConfig = {\n      ...baseConfig,\n      slugMap: {\n        products: 'items',\n      },\n    }\n\n    const result = getCollectionSlugMap({ sanitizedPluginConfig: config })\n\n    expect(result.products).toBe('items')\n    expect(result.addresses).toBe('addresses')\n    expect(result.carts).toBe('carts')\n    expect(result.customers).toBe('users')\n    expect(result.orders).toBe('orders')\n    expect(result.transactions).toBe('transactions')\n    expect(result.variants).toBe('variants')\n    expect(result.variantOptions).toBe('variantOptions')\n    expect(result.variantTypes).toBe('variantTypes')\n  })\n\n  it('should handle empty slugMap', () => {\n    const config: SanitizedEcommercePluginConfig = {\n      ...baseConfig,\n      slugMap: {},\n    }\n\n    const result = getCollectionSlugMap({ sanitizedPluginConfig: config })\n\n    expect(result).toEqual({\n      addresses: 'addresses',\n      carts: 'carts',\n      customers: 'users',\n      orders: 'orders',\n      products: 'products',\n      transactions: 'transactions',\n      variantOptions: 'variantOptions',\n      variants: 'variants',\n      variantTypes: 'variantTypes',\n    })\n  })\n\n  it('should handle undefined slugMap', () => {\n    const config: SanitizedEcommercePluginConfig = {\n      ...baseConfig,\n      slugMap: undefined,\n    }\n\n    const result = getCollectionSlugMap({ sanitizedPluginConfig: config })\n\n    expect(result).toEqual({\n      addresses: 'addresses',\n      carts: 'carts',\n      customers: 'users',\n      orders: 'orders',\n      products: 'products',\n      transactions: 'transactions',\n      variantOptions: 'variantOptions',\n      variants: 'variants',\n      variantTypes: 'variantTypes',\n    })\n  })\n})\n"],"names":["USD","getCollectionSlugMap","describe","mockAccessConfig","adminOnlyFieldAccess","jest","fn","adminOrPublishedStatus","customerOnlyFieldAccess","isAdmin","isAuthenticated","isDocumentOwner","publicAccess","baseConfig","access","addresses","addressFields","carts","currencies","defaultCurrency","supportedCurrencies","customers","slug","orders","payments","paymentMethods","products","transactions","it","result","sanitizedPluginConfig","expect","toEqual","variantOptions","variants","variantTypes","config","toBe","slugMap","undefined"],"mappings":"AAEA,SAASA,GAAG,QAAQ,yBAAwB;AAC5C,SAASC,oBAAoB,QAAQ,yBAAwB;AAE7DC,SAAS,wBAAwB;IAC/B,MAAMC,mBAAmB;QACvBC,sBAAsBC,KAAKC,EAAE;QAC7BC,wBAAwBF,KAAKC,EAAE;QAC/BE,yBAAyBH,KAAKC,EAAE;QAChCG,SAASJ,KAAKC,EAAE;QAChBI,iBAAiBL,KAAKC,EAAE;QACxBK,iBAAiBN,KAAKC,EAAE;QACxBM,cAAcP,KAAKC,EAAE;IACvB;IAEA,MAAMO,aAA6C;QACjDC,QAAQX;QACRY,WAAW;YACTC,eAAe,EAAE;QACnB;QACAC,OAAO;QACPC,YAAY;YACVC,iBAAiB;YACjBC,qBAAqB;gBAACpB;aAAI;QAC5B;QACAqB,WAAW;YACTC,MAAM;QACR;QACAC,QAAQ;QACRC,UAAU;YACRC,gBAAgB,EAAE;QACpB;QACAC,UAAU;QACVC,cAAc;IAChB;IAEAC,GAAG,iEAAiE;QAClE,MAAMC,SAAS5B,qBAAqB;YAAE6B,uBAAuBjB;QAAW;QAExEkB,OAAOF,QAAQG,OAAO,CAAC;YACrBjB,WAAW;YACXE,OAAO;YACPI,WAAW;YACXE,QAAQ;YACRG,UAAU;YACVC,cAAc;YACdM,gBAAgB;YAChBC,UAAU;YACVC,cAAc;QAChB;IACF;IAEAP,GAAG,kDAAkD;QACnD,MAAMQ,SAAyC;YAC7C,GAAGvB,UAAU;YACbQ,WAAW;gBACTC,MAAM;YACR;QACF;QAEA,MAAMO,SAAS5B,qBAAqB;YAAE6B,uBAAuBM;QAAO;QAEpEL,OAAOF,OAAOR,SAAS,EAAEgB,IAAI,CAAC;IAChC;IAEAT,GAAG,kCAAkC;QACnC,MAAMQ,SAAyC;YAC7C,GAAGvB,UAAU;YACbyB,SAAS;gBACPZ,UAAU;gBACVQ,UAAU;gBACVX,QAAQ;YACV;QACF;QAEA,MAAMM,SAAS5B,qBAAqB;YAAE6B,uBAAuBM;QAAO;QAEpEL,OAAOF,OAAOH,QAAQ,EAAEW,IAAI,CAAC;QAC7BN,OAAOF,OAAOK,QAAQ,EAAEG,IAAI,CAAC;QAC7BN,OAAOF,OAAON,MAAM,EAAEc,IAAI,CAAC;QAC3B,oCAAoC;QACpCN,OAAOF,OAAOd,SAAS,EAAEsB,IAAI,CAAC;QAC9BN,OAAOF,OAAOZ,KAAK,EAAEoB,IAAI,CAAC;IAC5B;IAEAT,GAAG,2DAA2D;QAC5D,MAAMQ,SAAyC;YAC7C,GAAGvB,UAAU;YACbQ,WAAW;gBACTC,MAAM;YACR;YACAgB,SAAS;gBACPjB,WAAW;YACb;QACF;QAEA,MAAMQ,SAAS5B,qBAAqB;YAAE6B,uBAAuBM;QAAO;QAEpEL,OAAOF,OAAOR,SAAS,EAAEgB,IAAI,CAAC;IAChC;IAEAT,GAAG,2CAA2C;QAC5C,MAAMQ,SAAyC;YAC7C,GAAGvB,UAAU;YACbyB,SAAS;gBACPZ,UAAU;YACZ;QACF;QAEA,MAAMG,SAAS5B,qBAAqB;YAAE6B,uBAAuBM;QAAO;QAEpEL,OAAOF,OAAOH,QAAQ,EAAEW,IAAI,CAAC;QAC7BN,OAAOF,OAAOd,SAAS,EAAEsB,IAAI,CAAC;QAC9BN,OAAOF,OAAOZ,KAAK,EAAEoB,IAAI,CAAC;QAC1BN,OAAOF,OAAOR,SAAS,EAAEgB,IAAI,CAAC;QAC9BN,OAAOF,OAAON,MAAM,EAAEc,IAAI,CAAC;QAC3BN,OAAOF,OAAOF,YAAY,EAAEU,IAAI,CAAC;QACjCN,OAAOF,OAAOK,QAAQ,EAAEG,IAAI,CAAC;QAC7BN,OAAOF,OAAOI,cAAc,EAAEI,IAAI,CAAC;QACnCN,OAAOF,OAAOM,YAAY,EAAEE,IAAI,CAAC;IACnC;IAEAT,GAAG,+BAA+B;QAChC,MAAMQ,SAAyC;YAC7C,GAAGvB,UAAU;YACbyB,SAAS,CAAC;QACZ;QAEA,MAAMT,SAAS5B,qBAAqB;YAAE6B,uBAAuBM;QAAO;QAEpEL,OAAOF,QAAQG,OAAO,CAAC;YACrBjB,WAAW;YACXE,OAAO;YACPI,WAAW;YACXE,QAAQ;YACRG,UAAU;YACVC,cAAc;YACdM,gBAAgB;YAChBC,UAAU;YACVC,cAAc;QAChB;IACF;IAEAP,GAAG,mCAAmC;QACpC,MAAMQ,SAAyC;YAC7C,GAAGvB,UAAU;YACbyB,SAASC;QACX;QAEA,MAAMV,SAAS5B,qBAAqB;YAAE6B,uBAAuBM;QAAO;QAEpEL,OAAOF,QAAQG,OAAO,CAAC;YACrBjB,WAAW;YACXE,OAAO;YACPI,WAAW;YACXE,QAAQ;YACRG,UAAU;YACVC,cAAc;YACdM,gBAAgB;YAChBC,UAAU;YACVC,cAAc;QAChB;IACF;AACF"}